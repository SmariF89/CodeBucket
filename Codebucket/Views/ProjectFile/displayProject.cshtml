@model Codebucket.Models.ViewModels.ProjectViewModel
@using Codebucket.Models.ViewModels

@{
    ViewBag.Title = "Project Overview";
}

@{string owner = "";}
@if (@Model._isProjectOwner == true)
{
    owner = "you!";
} 
else
{
    owner = @Model._projectOwnerName;
}

<h2>@Model._projectName</h2>
<h3>Owned by @owner</h3>

<table class="highlight bordered">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Filename</th>
            <th scope="col">Preview</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        @{int counter = 1;}
        @foreach (ProjectFileViewModel item in Model._projectFiles)
        {
            string preview = item._projectFileData.Length > 20 ? item._projectFileData.Substring(0, 20) + "..." : item._projectFileData + "...";
            <tr>
                <td scope="row">@counter</td>
                <td>@Html.ActionLink(item._projectFileName, "updateProjectFile", new { id = item._id }, new { @class = "collection-item" })</td>
                <td>@preview</td>
                <td class="fileDel">
                    @if (Model._isProjectOwner == true && Model._projectFiles.Count > 1)
                    {
                        <figure>
                            <a href="/ProjectFile/deleteProjectFile/@item._id" title="Delete file">
                                <img class="delSymbol" alt="not found" src="~/Content/Symbols/delete.png" />
                            </a>
                        </figure>
                    }
                </td>
            </tr>
            counter++;
        }
    </tbody>
</table>
<ul class="collection with-header">
    <li class="collection-header"><h4>Project members</h4></li>
    @foreach (ProjectMemberViewModel item in Model._projectMembers)
    {
        <li class="collection-item">

            @Html.DisplayFor(modelItem => item._userName)

        </li>
    }
</ul>

<br />

@if (Model._isProjectOwner == true)
{

    @Html.ActionLink("Add file", "createNewProjectFile", new { id = Model._id }, new { @class = "waves-effect waves-light btn" })
    <br />
    <br />
    @Html.ActionLink("Add member", "addProjectMember", new { id = Model._id }, new { @class = "waves-effect waves-light btn" })
    <br />
    <br />
    <div>
        @Html.ActionLink("Back", "../Project/Index", null, new { @class = "waves-effect waves-light btn" })
    </div>
}
else
{
    <div>
        @Html.ActionLink("Back", "../Project/Index", null, new { @class = "waves-effect waves-light btn" })
    </div>
}
